<?xml version="1.0"?>
<!--
 (c) 2005-2019 Copyright, Real-Time Innovations, Inc.  All rights reserved.
 RTI grants Licensee a license to use, modify, compile, and create derivative
 works of the Software.  Licensee has the right to distribute object form only
 for use with RTI products.  The Software is provided "as is", with no warranty
 of any type, including any warranty for fitness for any purpose. RTI is under
 no obligation to maintain or support the Software.  RTI shall not be liable for
 any incidental or consequential damages arising out of the use or inability to
 use the software.
-->
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://community.rti.com/schema/5.3.1/rti_replay.xsd">

    <!-- This configuration replays every table in the database (any topic or
         type, any record group and any domain name) on domain 0, at the same
         speed the data was recorded. Data will be published in partition * ,
         which will match every subscriber regardless of its partition -->
    <replay_service name="example_use_case_1">

        <!-- Time control settings: normal replay rate and automatically start
             replaying upon start of the service -->
        <time_control>
            <rate>1</rate>
            <start_mode>AUTOMATIC</start_mode>
        </time_control>

        <!-- Database, participant and session information -->
        <replay_database>
            <!-- The name of the file to be replayed -->
            <filename>example_use_case_1</filename>
            <!-- Set the database file as writable. This is necessary when the
                 SQLite indexes of the database haven't been created yet -->
            <readonly>false</readonly>
            <!-- Configuration for the output participant -->
            <participant>
                <!-- Replay everything on domain 0 -->
                <domain_id>0</domain_id>
            </participant>

            <!-- Replay all the topics recorded in Partition_A RecordGroup -->
            <session name="session_for_all_partitions">
            <!-- Specify partition * in Publisher QoS (this wildcard will
                 match any partition) -->
                <publisher_qos>
                    <partition>
                        <name>
                            <element>*</element>
                        </name>
                    </partition>
                </publisher_qos>

                <!-- Create a Replay topic entity for every topic or type, any
                     record group and any domain name -->
                <replay_topic>
                    <input>
                        <topic_name>*</topic_name>
                        <type_name>*</type_name>
                        <record_group_name>*</record_group_name>
                        <domain_name>*</domain_name>
                    </input>
                </replay_topic>
            </session>

        </replay_database>
    </replay_service>


    <!-- This configuration replays all topics in the DB on domain 0. Data
         in Partition_A RecordGroup will be published in Partition A.
         Similarly, Data in Partition_B RecordGroup will be published in
         Partition B. -->
    <replay_service name="example_use_case_2">

        <!-- Time control settings: normal replay rate and automatically start
             replaying upon start of the service -->
        <time_control>
            <rate>1</rate>
            <start_mode>AUTOMATIC</start_mode>
        </time_control>

        <!-- Database, participant and session information -->
        <replay_database>
            <!-- The name of the file to be replayed -->
            <filename>example_use_case_2</filename>
            <!-- Set the database file as writable. This is necessary when the
                 SQLite indexes of the database haven't been created yet -->
            <readonly>false</readonly>
            <!-- Configuration for the output participant -->
            <participant>
                <!-- Replay everything on domain 0 -->
                <domain_id>0</domain_id>
            </participant>

            <!-- Replay all the topics recorded in Partition_A RecordGroup -->
            <session name="session_for_partition_A">
            <!-- Specify partition A in Publisher QoS (multiple partitions
                 could be specified with multiple elements) -->
                <publisher_qos>
                    <partition>
                        <name>
                            <element>A</element>
                        </name>
                    </partition>
                </publisher_qos>

                <!-- Create a Replay topic entity for every topic or type and
                     any domain name. The record group name specified in the
                     Record configuration for Partition A needs to be set up
                     here. -->
                <replay_topic>
                    <input>
                        <topic_name>*</topic_name>
                        <type_name>*</type_name>
                        <record_group_name>Partition_A</record_group_name>
                        <domain_name>*</domain_name>
                    </input>
                </replay_topic>
            </session>

            <!-- Replay all the topics recorded in Partition_B RecordGroup -->
            <session name="session_for_partition_B">
            <!-- Specify partition B in Publisher QoS (multiple partitions
                 could be specified with multiple elements) -->
                <publisher_qos>
                    <partition>
                        <name>
                            <element>B</element>
                        </name>
                    </partition>
                </publisher_qos>

                <!-- Create a Replay topic entity for every topic or type and
                     any domain name. The record group name specified in the
                     Record configuration for Partition B needs to be set up
                     here. -->
                <replay_topic>
                    <input>
                        <topic_name>*</topic_name>
                        <type_name>*</type_name>
                        <record_group_name>Partition_B</record_group_name>
                        <domain_name>*</domain_name>
                    </input>
                </replay_topic>
            </session>

        </replay_database>
    </replay_service>


    <!-- This configuration replays all topics in the DB on domain 0. Data
         will be replayed in the same partition it was recorded, thanks to the
         option <use_original_partitions> -->
    <replay_service name="example_use_case_3">

        <!-- Time control settings: normal replay rate and automatically start
             replaying upon start of the service -->
        <time_control>
            <rate>1</rate>
            <start_mode>AUTOMATIC</start_mode>
        </time_control>

        <!-- Replay samples on the same partition they were recorded. We will
             consider every partition in this use case -->
        <use_original_partitions>true</use_original_partitions>

        <!-- Database, participant and session information -->
        <replay_database>
            <!-- The name of the file to be replayed -->
            <filename>example_use_case_3.dat_0_0</filename>
            <!-- Set the database file as writable. This is necessary when the
                 SQLite indexes of the database haven't been created yet -->
            <readonly>false</readonly>
            <!-- Configuration for the output participant -->
            <participant>
                <!-- Replay everything on domain 0 -->
                <domain_id>0</domain_id>
            </participant>

            <!-- Replay all the topics recorded in Partition_A RecordGroup -->
            <session name="session_for_all_partitions">
                <!-- Create a Replay topic entity for every topic or type and
                     any domain name. Data from all the recorded partitions
                     will be correctly published thanks to
                     <use_original_partitions>  -->
                <replay_topic>
                    <input>
                        <topic_name>*</topic_name>
                        <type_name>*</type_name>
                        <record_group_name>*</record_group_name>
                        <domain_name>*</domain_name>
                    </input>
                </replay_topic>
            </session>

        </replay_database>
    </replay_service>
</dds>
